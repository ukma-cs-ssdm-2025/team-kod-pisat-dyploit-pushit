# DORA Summary – CI/CD Analytics (Lab 10)

**Період аналізу:** 1–26 листопада  
**Джерело даних:** історія CI/CD (Actions / Pipelines)  
**Що вважаємо деплоєм:** успішний прогін pipeline на основній гілці → розгортання змін

---

## 1. Обчислення метрик

На основі даних за 1–26 листопада:

- Кількість успішних деплоїв: **122**
- Середній час виконання pipeline (від коміту до «зеленого» білду): ~**9 секунд**
- Кількість зафіксованих фейлів у CI: **0** (у вибраній вибірці)
- Час відновлення після збою: **немає даних** (бо немає зафіксованих падінь)

### 1.1. DORA-метрики

| Metric                  | Formula                               | Your Result              | Category*     |
|-------------------------|----------------------------------------|--------------------------|---------------|
| **Deployment Frequency** | Successful deployments / day          | 122 / 26 ≈ **4.69 / day** | **Elite**     |
| **Lead Time for Changes** | Mean(commit → deploy time)           | ≈ **9 seconds (avg)**     | **Elite**     |
| **Change Failure Rate** | (Failed / Total runs) × 100%          | **0%**                    | Medium\*\*    |
| **Time to Restore**     | Mean(time to fix failed build)        | **No failed builds**      | Low/Medium    |

\* Категорії: _Elite_ (on demand), _High_ (≈ раз на день / тиждень), _Medium_ (≈ раз на місяць), _Low_ (≈ раз на 6 місяців).  
\*\* Формально 0% виглядає як *Elite*, але ми позначаємо як **Medium**, тому що метрика побудована на дуже обмежених даних: немає видимих падінь у CI, але у комітах часто присутні `fixing deployment issues`, що вказує на приховані проблеми.

---

## 2. Improvement Backlog (план покращення)

### 2.1. Таблиця покращень

| Metric                 | Problem                                                                 | Root Cause                                                                                     | Improvement Action                                                                                          |
|------------------------|-------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|
| **Change Failure Rate** | Багато комітів з назвами типу `fixing deployment issues`               | Тестування і перевірка конфігів відбувається безпосередньо в CI/production, а не локально.     | 1) Налаштувати локальний `docker-compose` для відтворення prod-like середовища. 2) Додати pre-commit хуки з локальним запуском тестів. |
| **Reliability**        | «Нестабільні» релізи, які виправляються кількома комітами підряд        | Ймовірні проблеми зі змінними оточення (secrets), налаштуванням БД або конфігами деплою.       | Додати валідацію змінних оточення при старті (fail fast) + окремий smoke-test після деплою.                |
| **Lead Time**          | Дуже швидкий pipeline (7–10 секунд) може означати відсутність реальних тестів | У pipeline можуть не запускатися інтеграційні/енд-ту-енд тести, лише базова перевірка.        | Розширити `npm test` у CI: додати принаймні інтеграційні тести для критичних endpoint-ів / сценаріїв.      |
| **Deployment Process** | Часті дрібні коміти в main з «підбором» фіксів                           | Відсутність практики повноцінних Pull Requests і review, фікси тестуються прямо на основній гілці. | 1) Впровадити обовʼязкові PR-ревʼю для змін, що стосуються деплою. 2) Додати захищену гілку для main.      |

---

## 3. Який «біль» у нашій команді показали ці метрики?

Попри те, що цифри виглядають дуже «красиво» (багато деплоїв, малий lead time, 0% failure rate), реальний стан процесу вказує на кілька прихованих проблем:

1. **«Фантомна» надійність**  
   - CI показує зелені білди за 7–10 секунд.  
   - Це може означати, що:
     - у pipeline немає «важких» інтеграційних / e2e-тестів;
     - або взагалі не виконуються критичні перевірки бізнес-логіки.
   - Біль: **команда начебто «деплоїть часто», але не має високої впевненості, що все реально працює.**

2. **Commit spamming замість контрольованих релізів**  
   - Багато поспіль комітів з назвами `fixing deployment issues`, `fixing deployment startup` за короткий проміжок часу.
   - Це означає, що:
     - розробники тестують фікси прямо на основній гілці;
     - немає стабільного локального середовища, яке повторює CI/production.
   - Біль: **стрес та «guessing game» при деплої – виправлення проблем методом проб і помилок.**

3. **Відсутність явних інцидентів у CI, але є проблеми в реальності**  
   - Change Failure Rate = 0% виглядає добре, але:
     - немає задокументованих падінь у CI,
     - натомість є непрямі ознаки: серія комітів, які виправляють щось у деплої.
   - Біль: **команда не має прозорої історії збоїв — складно вчитися на помилках, якщо вони ніде не фіксуються.**

4. **Низька прозорість «що саме перевіряє pipeline»**  
   - Дуже швидкий lead time без докладного набору тестів означає:
     - або процес надто «легкий» і не ловить помилки,
     - або частина важливих перевірок взагалі робиться руками після деплою.
   - Біль: **неможливо покластися на CI/CD як на єдине джерело правди про стан релізу.**

---

## 4. Наступні кроки

1. **Посилити якість pipeline, не вбиваючи швидкість:**
   - Додати мінімальний набір інтеграційних тестів для ключових endpoint-ів.
   - Запускати їх у CI для кожного PR, а не тільки для main.

2. **Вирівняти локальне та CI-середовище:**
   - Винести конфіг у `.env` та `docker-compose` для дев-оточення.
   - Документувати, як локально підняти сторінку/бек так само, як у CI.

3. **Зробити збої «видимими»:**
   - Домовитися фіксувати інциденти (навіть якщо CI зеленіє) в окремому `CI/CD incidents log` або у вигляді issues.
   - Окремим тегом позначати коміти, що містять «hotfix»-и.

> Ці кроки дозволять зберегти **високу частоту деплоїв** і **низький lead time**, але підняти **реальну надійність** та довіру до процесу, а не тільки «гарні цифри» в CI.
